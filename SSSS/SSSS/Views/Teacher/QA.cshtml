@model IEnumerable<QAQuestion>
@{ ViewData["Title"] = "Q & A"; ViewData["Active"] = "QA"; }
<div class="card"><div class="card-header"><i class="bi bi-chat-dots me-2"></i>Student Questions</div>
<div class="card-body">
@foreach (var q in Model){
<div class="border rounded p-3 mb-3">
    <div class="d-flex justify-content-between mb-2"><strong>@q.QuestionText</strong><small class="text-muted">@q.Subject?.Name · @q.Student?.FullName · @q.AskedAt.ToString("dd MMM")</small></div>
    @foreach (var a in q.Answers){<div class="bg-light rounded p-2 mb-2 ms-3"><small class="text-success fw-semibold">@a.Teacher?.FullName:</small><br/>@a.AnswerText</div>}
    <form asp-action="PostAnswer" method="post" class="d-flex gap-2 mt-2">@Html.AntiForgeryToken()
    <input type="hidden" name="questionId" value="@q.Id"/>
    <input name="answerText" class="form-control form-control-sm" placeholder="Write your answer..."/>
    <button type="submit" class="btn btn-sm btn-primary">Answer</button></form>
</div>}
@if (!Model.Any()){<p class="text-muted text-center py-3">No questions yet.</p>}
</div></div>
