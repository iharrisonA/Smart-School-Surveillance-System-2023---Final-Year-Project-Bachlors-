{% extends "base.html" %}
{% block title %}Fee Structure â€” SSSS{% endblock %}
{% block page_title %}Fee Structure{% endblock %}
{% block page_subtitle %}Set fee amounts per class{% endblock %}
{% block content %}
<div class="grid-2">
  <div class="card">
    <div class="card-header"><h3><i class="fas fa-money-bill" style="color: var(--success);"></i> Set Fee Structure</h3></div>
    <div class="card-body">
      <form method="POST">
        <div class="form-group">
          <label>Select Class *</label>
          <select name="class_id" required>
            <option value="">Select Class</option>
            {% for c in classes %}
            <option value="{{ c.id }}">{{ c.class_name }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="form-group">
          <label>Tuition Fee (PKR) *</label>
          <input type="number" name="amount" placeholder="e.g. 3000" min="0" required>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label>Transport Fee</label>
            <input type="number" name="transport" placeholder="0" min="0" value="0">
          </div>
          <div class="form-group">
            <label>Sports Fee</label>
            <input type="number" name="sports" placeholder="0" min="0" value="0">
          </div>
        </div>
        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Fee Structure</button>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><h3><i class="fas fa-list" style="color: var(--primary);"></i> Existing Fees</h3></div>
    <div class="table-wrap">
      {% if fees %}
      <table>
        <thead><tr><th>Class</th><th>Tuition</th><th>Transport</th><th>Sports</th><th>Total</th><th>Action</th></tr></thead>
        <tbody>
          {% for f in fees %}
          <tr>
            <td><strong>{{ f.class_name }}</strong></td>
            <td>PKR {{ "%.0f"|format(f.amount) }}</td>
            <td>PKR {{ "%.0f"|format(f.transport) }}</td>
            <td>PKR {{ "%.0f"|format(f.sports) }}</td>
            <td><strong>PKR {{ "%.0f"|format(f.amount + f.transport + f.sports) }}</strong></td>
            <td><a href="{{ url_for('admin_delete_fee', fid=f.id) }}" class="btn btn-sm btn-danger" data-confirm="Delete fee?"><i class="fas fa-trash"></i></a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <div class="empty-state"><i class="fas fa-money-bill"></i><p>No fee structures set yet.</p></div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
