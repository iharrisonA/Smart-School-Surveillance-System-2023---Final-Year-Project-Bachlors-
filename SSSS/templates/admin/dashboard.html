{% extends "base.html" %}
{% block title %}Admin Dashboard â€” SSSS{% endblock %}
{% block page_title %}Admin Dashboard{% endblock %}
{% block page_subtitle %}Manage the entire school system{% endblock %}

{% block content %}
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-icon blue"><i class="fas fa-chalkboard-teacher"></i></div>
    <div><div class="stat-value">{{ stats.teachers }}</div><div class="stat-label">Teachers</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon green"><i class="fas fa-user-graduate"></i></div>
    <div><div class="stat-value">{{ stats.students }}</div><div class="stat-label">Students</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon purple"><i class="fas fa-layer-group"></i></div>
    <div><div class="stat-value">{{ stats.classes }}</div><div class="stat-label">Classes</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon cyan"><i class="fas fa-book"></i></div>
    <div><div class="stat-value">{{ stats.subjects }}</div><div class="stat-label">Subjects</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon orange"><i class="fas fa-bullhorn"></i></div>
    <div><div class="stat-value">{{ stats.announcements }}</div><div class="stat-label">Announcements</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon red"><i class="fas fa-file-alt"></i></div>
    <div><div class="stat-value">{{ stats.pending_apps }}</div><div class="stat-label">Pending Apps</div></div>
  </div>
</div>

<div class="grid-2">
  <!-- Quick Actions -->
  <div class="card">
    <div class="card-header"><h3><i class="fas fa-bolt" style="color: var(--warning);"></i> Quick Actions</h3></div>
    <div class="card-body">
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
        <a href="{{ url_for('admin_add_student') }}" class="btn btn-primary"><i class="fas fa-plus"></i> Add Student</a>
        <a href="{{ url_for('admin_add_teacher') }}" class="btn btn-success"><i class="fas fa-plus"></i> Add Teacher</a>
        <a href="{{ url_for('admin_announcements') }}" class="btn btn-warning"><i class="fas fa-bullhorn"></i> Announcement</a>
        <a href="{{ url_for('admin_voucher') }}" class="btn btn-secondary"><i class="fas fa-receipt"></i> Generate Voucher</a>
        <a href="{{ url_for('admin_applications') }}" class="btn btn-outline" style="grid-column: span 2;">
          <i class="fas fa-file-alt"></i> View Applications ({{ stats.pending_apps }} pending)
        </a>
      </div>
    </div>
  </div>

  <!-- Recent Announcements -->
  <div class="card">
    <div class="card-header">
      <h3><i class="fas fa-bullhorn" style="color: var(--accent);"></i> Recent Announcements</h3>
      <a href="{{ url_for('admin_announcements') }}" class="btn btn-sm btn-secondary">View All</a>
    </div>
    <div class="card-body" style="padding: 0;">
      {% if announcements %}
        {% for ann in announcements %}
        <div style="padding: 0.85rem 1.25rem; border-bottom: 1px solid #f3f4f6;">
          <div class="flex justify-between items-center mb-1">
            <strong style="font-size: 0.875rem;">{{ ann.title }}</strong>
            <span class="badge badge-info" style="font-size: 0.65rem;">{{ ann.start_date }}</span>
          </div>
          <p class="text-sm text-muted">{{ ann.details[:80] }}{% if ann.details|length > 80 %}...{% endif %}</p>
        </div>
        {% endfor %}
      {% else %}
        <div class="empty-state"><i class="fas fa-bullhorn"></i><p>No announcements yet.</p></div>
      {% endif %}
    </div>
  </div>
</div>

<!-- System Info -->
<div class="card mt-3">
  <div class="card-header"><h3><i class="fas fa-info-circle" style="color: var(--accent2);"></i> System Overview</h3></div>
  <div class="card-body">
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
      <div style="text-align: center; padding: 1rem; background: #f9fafb; border-radius: 10px;">
        <div style="font-size: 2rem; color: var(--primary); font-family: 'Space Grotesk',sans-serif; font-weight: 700;">SSSS</div>
        <div style="font-size: 0.75rem; color: var(--muted);">Smart School Surveillance System</div>
      </div>
      <div style="padding: 1rem; background: #f9fafb; border-radius: 10px;">
        <div style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--muted); margin-bottom: 0.5rem;">Default Credentials</div>
        <div style="font-size: 0.8rem;"><strong>Admin:</strong> admin@ssss.com / admin123</div>
        <div style="font-size: 0.8rem;"><strong>Teacher:</strong> teacher@ssss.com / teacher123</div>
        <div style="font-size: 0.8rem;"><strong>Student:</strong> student@ssss.com / student123</div>
      </div>
      <div style="padding: 1rem; background: #f9fafb; border-radius: 10px;">
        <div style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--muted); margin-bottom: 0.5rem;">Tech Stack</div>
        <div style="font-size: 0.8rem;">Backend: Python Flask</div>
        <div style="font-size: 0.8rem;">Database: SQLite</div>
        <div style="font-size: 0.8rem;">Frontend: HTML/CSS/JS</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
