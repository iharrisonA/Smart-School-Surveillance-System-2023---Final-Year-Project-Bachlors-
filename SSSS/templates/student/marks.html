{% extends "base.html" %}
{% block title %}My Marks â€” SSSS{% endblock %}
{% block page_title %}My Marks{% endblock %}
{% block page_subtitle %}View your examination results{% endblock %}
{% block content %}
<div class="card">
  <div class="card-header"><h3><i class="fas fa-chart-bar" style="color: var(--warning);"></i> Examination Results</h3></div>
  {% if marks %}
  <div class="table-wrap">
    <table>
      <thead><tr><th>Subject</th><th>Exam Type</th><th>Marks</th><th>Total</th><th>Percentage</th><th>Grade</th></tr></thead>
      <tbody>
        {% for m in marks %}
        {% set pct = ((m.marks_obtained / m.total_marks) * 100)|round(1) if m.total_marks > 0 else 0 %}
        <tr>
          <td><strong>{{ m.subject_name }}</strong></td>
          <td><span class="badge badge-info">{{ m.exam_type }}</span></td>
          <td><strong>{{ m.marks_obtained }}</strong></td>
          <td>{{ m.total_marks }}</td>
          <td>
            <div style="display: flex; align-items: center; gap: 0.5rem;">
              <div style="flex: 1; background: #e5e7eb; border-radius: 20px; height: 6px; min-width: 60px;">
                <div style="width: {{ pct }}%; background: {{ '#10b981' if pct >= 60 else '#f59e0b' if pct >= 40 else '#ef4444' }}; height: 100%; border-radius: 20px;"></div>
              </div>
              <span style="font-size: 0.8rem; font-weight: 600;">{{ pct }}%</span>
            </div>
          </td>
          <td>
            {% if pct >= 90 %}<span class="badge badge-success">A+</span>
            {% elif pct >= 80 %}<span class="badge badge-success">A</span>
            {% elif pct >= 70 %}<span class="badge badge-info">B</span>
            {% elif pct >= 60 %}<span class="badge badge-info">C</span>
            {% elif pct >= 50 %}<span class="badge badge-warning">D</span>
            {% else %}<span class="badge badge-danger">F</span>{% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="empty-state"><i class="fas fa-chart-bar"></i><p>No marks entered yet.</p></div>
  {% endif %}
</div>
{% endblock %}
