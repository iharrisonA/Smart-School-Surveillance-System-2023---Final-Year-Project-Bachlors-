{% extends "base.html" %}
{% block title %}Student Dashboard â€” SSSS{% endblock %}
{% block page_title %}Student Dashboard{% endblock %}
{% block page_subtitle %}Track your academic progress{% endblock %}
{% block content %}
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-icon green"><i class="fas fa-calendar-check"></i></div>
    <div><div class="stat-value">{{ att_pct }}%</div><div class="stat-label">Attendance</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon blue"><i class="fas fa-check"></i></div>
    <div><div class="stat-value">{{ att_present }}</div><div class="stat-label">Days Present</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon orange"><i class="fas fa-file-alt"></i></div>
    <div><div class="stat-value">{{ pending_apps }}</div><div class="stat-label">Pending Applications</div></div>
  </div>
</div>

<!-- Student Info Card -->
<div class="grid-2 mb-3">
  <div class="card">
    <div class="card-header"><h3><i class="fas fa-id-card" style="color: var(--primary);"></i> My Profile</h3></div>
    <div class="card-body">
      <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
        <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--accent2)); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 700; flex-shrink: 0;">{{ student.name[0] }}</div>
        <div>
          <h3 style="font-size: 1.1rem;">{{ student.name }}</h3>
          <span class="badge badge-info">{{ student.class_name }}</span>
          <span class="badge badge-secondary" style="margin-left: 0.4rem;">Roll: {{ student.roll_number }}</span>
        </div>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.875rem;">
        <div><span class="text-muted">Gender:</span> {{ student.gender }}</div>
        <div><span class="text-muted">DOB:</span> {{ student.dob }}</div>
        <div><span class="text-muted">Phone:</span> {{ student.phone }}</div>
        <div><span class="text-muted">Parent:</span> {{ student.parent_name }}</div>
        <div style="grid-column: span 2;"><span class="text-muted">Address:</span> {{ student.address }}</div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><h3><i class="fas fa-bullhorn" style="color: var(--accent);"></i> Announcements</h3></div>
    <div style="max-height: 280px; overflow-y: auto;">
      {% if announcements %}
        {% for ann in announcements %}
        <div style="padding: 0.75rem 1.25rem; border-bottom: 1px solid #f3f4f6;">
          <strong style="font-size: 0.875rem;">{{ ann.title }}</strong>
          <p class="text-sm text-muted mt-1">{{ ann.details[:80] }}{% if ann.details|length > 80 %}...{% endif %}</p>
          <p style="font-size: 0.72rem; color: var(--muted); margin-top: 0.3rem;"><i class="fas fa-calendar"></i> {{ ann.start_date }}</p>
        </div>
        {% endfor %}
      {% else %}
      <div class="empty-state"><i class="fas fa-bullhorn"></i><p>No announcements.</p></div>
      {% endif %}
    </div>
  </div>
</div>

<div class="card">
  <div class="card-header"><h3><i class="fas fa-bolt" style="color: var(--warning);"></i> Quick Access</h3></div>
  <div class="card-body">
    <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
      <a href="{{ url_for('student_attendance') }}" class="btn btn-primary"><i class="fas fa-calendar-check"></i> My Attendance</a>
      <a href="{{ url_for('student_marks') }}" class="btn btn-success"><i class="fas fa-chart-bar"></i> My Marks</a>
      <a href="{{ url_for('student_materials') }}" class="btn btn-secondary"><i class="fas fa-book-open"></i> Study Materials</a>
      <a href="{{ url_for('student_applications') }}" class="btn btn-warning"><i class="fas fa-file-signature"></i> Submit Application</a>
      <a href="{{ url_for('student_qa') }}" class="btn btn-outline"><i class="fas fa-comments"></i> Ask a Question</a>
    </div>
  </div>
</div>
{% endblock %}
