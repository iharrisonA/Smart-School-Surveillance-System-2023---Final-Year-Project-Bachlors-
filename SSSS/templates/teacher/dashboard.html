{% extends "base.html" %}
{% block title %}Teacher Dashboard â€” SSSS{% endblock %}
{% block page_title %}Teacher Dashboard{% endblock %}
{% block page_subtitle %}Manage your classes and students{% endblock %}
{% block content %}
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-icon blue"><i class="fas fa-book"></i></div>
    <div><div class="stat-value">{{ stats.subjects }}</div><div class="stat-label">Assigned Subjects</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon green"><i class="fas fa-upload"></i></div>
    <div><div class="stat-value">{{ stats.lectures }}</div><div class="stat-label">Materials Uploaded</div></div>
  </div>
  <div class="stat-card">
    <div class="stat-icon orange"><i class="fas fa-question-circle"></i></div>
    <div><div class="stat-value">{{ stats.qa }}</div><div class="stat-label">Unanswered Questions</div></div>
  </div>
</div>

<div class="grid-2">
  <div class="card">
    <div class="card-header"><h3><i class="fas fa-book" style="color: var(--primary);"></i> My Subjects</h3></div>
    <div class="table-wrap">
      {% if assignments %}
      <table>
        <thead><tr><th>Subject</th><th>Class</th><th>Actions</th></tr></thead>
        <tbody>
          {% for a in assignments %}
          <tr>
            <td><strong>{{ a.subject_name }}</strong></td>
            <td><span class="badge badge-info">{{ a.class_name }}</span></td>
            <td>
              <a href="{{ url_for('teacher_attendance') }}" class="btn btn-sm btn-secondary"><i class="fas fa-clipboard-check"></i></a>
              <a href="{{ url_for('teacher_marks') }}" class="btn btn-sm btn-secondary"><i class="fas fa-star"></i></a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <div class="empty-state"><i class="fas fa-book"></i><p>No subjects assigned yet.<br>Contact admin.</p></div>
      {% endif %}
    </div>
  </div>

  <div class="card">
    <div class="card-header"><h3><i class="fas fa-bullhorn" style="color: var(--accent);"></i> Recent Announcements</h3></div>
    <div style="max-height: 300px; overflow-y: auto;">
      {% if announcements %}
        {% for ann in announcements %}
        <div style="padding: 0.85rem 1.25rem; border-bottom: 1px solid #f3f4f6;">
          <strong style="font-size: 0.875rem;">{{ ann.title }}</strong>
          <p class="text-sm text-muted mt-1">{{ ann.details[:80] }}{% if ann.details|length > 80 %}...{% endif %}</p>
        </div>
        {% endfor %}
      {% else %}
      <div class="empty-state"><i class="fas fa-bullhorn"></i><p>No announcements.</p></div>
      {% endif %}
    </div>
  </div>
</div>

<div class="card mt-3">
  <div class="card-header"><h3><i class="fas fa-bolt" style="color: var(--warning);"></i> Quick Actions</h3></div>
  <div class="card-body">
    <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
      <a href="{{ url_for('teacher_attendance') }}" class="btn btn-primary"><i class="fas fa-clipboard-check"></i> Take Attendance</a>
      <a href="{{ url_for('teacher_marks') }}" class="btn btn-success"><i class="fas fa-star"></i> Enter Marks</a>
      <a href="{{ url_for('teacher_lectures') }}" class="btn btn-warning"><i class="fas fa-upload"></i> Upload Material</a>
      <a href="{{ url_for('teacher_announcements') }}" class="btn btn-secondary"><i class="fas fa-bullhorn"></i> Make Announcement</a>
      <a href="{{ url_for('teacher_qa') }}" class="btn btn-outline"><i class="fas fa-question-circle"></i> Answer Questions {% if stats.qa > 0 %}<span class="badge badge-danger" style="margin-left: 0.25rem;">{{ stats.qa }}</span>{% endif %}</a>
    </div>
  </div>
</div>
{% endblock %}
