{% extends "base.html" %}
{% block title %}Lectures & Assignments â€” SSSS{% endblock %}
{% block page_title %}Lectures & Assignments{% endblock %}
{% block page_subtitle %}Upload and manage study materials{% endblock %}
{% block content %}
<div class="grid-2">
  <div class="card">
    <div class="card-header"><h3><i class="fas fa-upload" style="color: var(--success);"></i> Upload Material</h3></div>
    <div class="card-body">
      <form method="POST">
        <div class="form-group">
          <label>Title *</label>
          <input type="text" name="title" placeholder="Lecture or assignment title" required>
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea name="description" placeholder="Brief description or instructions..."></textarea>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label>Class</label>
            <select name="class_id" required>
              <option value="">Select Class</option>
              {% for a in assignments %}
              <option value="{{ a.class_id }}">{{ a.class_name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="form-group">
            <label>Subject</label>
            <select name="subject_id" required>
              <option value="">Select Subject</option>
              {% for a in assignments %}
              <option value="{{ a.subject_id }}">{{ a.subject_name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="form-group">
            <label>Type</label>
            <select name="type">
              <option value="lecture">Lecture</option>
              <option value="assignment">Assignment</option>
              <option value="notes">Notes</option>
            </select>
          </div>
          <div class="form-group">
            <label>Due Date (if assignment)</label>
            <input type="date" name="due_date">
          </div>
        </div>
        <button type="submit" class="btn btn-primary"><i class="fas fa-upload"></i> Upload</button>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><h3><i class="fas fa-list" style="color: var(--primary);"></i> My Uploaded Materials</h3></div>
    <div style="max-height: 520px; overflow-y: auto;">
      {% if lectures %}
        {% for l in lectures %}
        <div style="padding: 0.9rem 1.25rem; border-bottom: 1px solid #f3f4f6;">
          <div class="flex justify-between items-center mb-1">
            <strong style="font-size: 0.875rem;">{{ l.title }}</strong>
            <span class="badge badge-{{ 'info' if l.type == 'lecture' else 'warning' if l.type == 'assignment' else 'secondary' }}">{{ l.type }}</span>
          </div>
          <div style="font-size: 0.8rem; color: var(--muted);">
            <i class="fas fa-book"></i> {{ l.subject_name }} &bull;
            <i class="fas fa-layer-group"></i> {{ l.class_name }}
            {% if l.due_date %}&bull; <i class="fas fa-calendar"></i> Due: {{ l.due_date }}{% endif %}
          </div>
          {% if l.description %}
          <p style="font-size: 0.8rem; margin-top: 0.4rem; color: #374151;">{{ l.description[:100] }}</p>
          {% endif %}
        </div>
        {% endfor %}
      {% else %}
      <div class="empty-state"><i class="fas fa-upload"></i><p>No materials uploaded yet.</p></div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
